# 積體電路設計實驗 (IC Lab)
## 概述
- 課程名稱：積體電路設計實驗
- 選修年度：111下
- 授課教師：李鎮宜副校長
- 開課單位：電子碩     
- 永久課號：EEIE30041
- 學分數：4.00
- 必/選修：選修

課程比較有名的名稱是 交大ICLab。是在批批踢和 Dcard 看板上出現頻率比較高的一門課，以其不人性的作業 loading 與紮實程度著稱。我是在專題老師的推薦之下決定利用大四下的時間好好把他修過，也算是在大學的最後一個學期補上數位電路設計最核心的一門課。修課的同學大部分為電類碩士生，接下來是電機系大四的同學。還有為數不少其他科系對於IC設計有興趣的同學，希望通過修過這一門課方便找相關工作。課程設計目的是帶修課同學粗略的跑過一次 Design Flow，當然比較著重在前端的部分。開課的李鎮宜副校長在第一堂課就有特別提醒(警告)沒有準備好的同學最好不要貿然接受這 12 Lab+ Midterm/Final Project 的洗禮。最後一堂課李教授還有特別恭喜所有同學已經具備初步 IC 設計的能力，我覺得挺感動的。在那些為了 deadline 而搔頭並熬夜的煎熬，還是非常值得的。

## 上課模式

除了第一堂課和最後一堂課之外，李教授是不會親自到課堂上授課的。而是會由數個助教負責，每個助教的教學品質不同，部過大多數還算口齒清晰，言之有物。雖然大多數講義上的內容還需要同學們自己回去看講義複習，或是從實做中慢慢累積經驗。通常課堂的一開始會由上個 Lab 表現最好的同學來講解自己的設計理念和實作細節，讓其他同學可以學習。接下來助教就會接手講解當天設定的課程內容。最後還會帶同學們看過一次當周的 Practice 和 Exercise，讓同學們對於題目有初步的認識。上課時間通常是兩個小時就結束了，不會拖到很久。期中考核期末考的內容也是從講義裡面出的，況且當周的 Exercise 都會運用到課堂上講的知識，想要通盤的理解課堂，認真聽講是非常重要的第一步。整個學期所學到的課程主題如下:

#### 單元列表

Week | Course Content | Lab Unit | Pass Rate
:--------|:-----| :----- | :----: 
01| Introduction (Environment Setting)              | - | -
02| Verilog Combination Syntax                      | Chinese Course | 92.45%
03| Sequential Logic Design (1/2) + generate syntax | 12-Queen  | 73.58%
04| Testbench Programming Syntax                    | Subway Surfes | 91.84%
05| Sequential Logic Design (2/2)                   | Simple RNN | 91.84%
06| Memory & coding style & nLint                   | Matrix Multiplication to find Tracd | 87.63%
07| Design Compiler + IP Design (DesignWare) with genvar    | Elliptic Curve Group Operation | 88.86%
09| Synthesis & Static Time Analysis + Cross Clock Domain   | CDC Doraemon tester  | 81.44
10| Low power design                                | Siamese Neural Network | 86.46
11| SystemVerilog for design                        | Online Shopping Platform Simulation | 75.79%
12| SystemVerilog for verification                  | OS Coverage from Lab09 | 80.85%
13| Formal Verification (Bonus)                     | Bonus Lab | -
14| APR: From RTL to GDSII                          | Matrix Multiplication with Systolic Array | 95.29%
15| APR: IR-Drop Analysis                           | Train Tour APRII | 97.65%

想當然爾，只有上課認真在這堂課是遠遠不夠的。這堂課最有名的就是總共 12 次 Lab Exercise。從每個禮拜三公布題目開始，1de 的期限是下個禮拜一中午， 2de 則是到下禮拜三中午，所謂的通過是指通過**所有**的測試資料。也就是說如果你通過了1de就會有兩天的休息時間，否則就整個禮拜都在寫作業。lab 的成績計算方式通常是通過 demo 就有基本分 70 分，另外的分數是要和同學之間的設計做比較，分數按照名次依序遞減到 0，蠻殘酷的。2de 的話會打七折。這套計分系統的設計很大程度模擬了電路設計就業環境的假定: 必須在時間壓力下設計出功能正確的晶片才能夠快速搶佔市場，取得先機。並且通常是由贏者全拿的現象。

這堂課也有期中考及期末考，考試內容就是講義上的內容，形式是紙筆測驗，每一次考試剛好涵蓋六個主題。像要考得好成績，拿到考古題還蠻有幫助的。也會在期中考當天進行一次上機考，可以把他想成難度介於 Practice 和 Exercise之間的測驗，現場也會有 1de 2de ，如果現場沒有做出來也可以帶回家慢慢做，但是分數就會被打對折。另外上機考試只能使用 Vim 或 Gedit 這兩個文字編輯器，對於有自喜使用習慣的同學會是個需要克服的點。

另外就是其中專題和期末專題了。其中專題會是利用 AMBA Bus 來串聯 DRAM 和運算電路並進行高速的資料吞吐，難度是比每個星期的Lab 還要複雜一些。期末專題則是總結整個學期所學的電路設計流程，設計一個微處理器。要從前端的RTL 一路到後端的 APR，算是為整個學期的學習做一個很好的總結。專題的內容都慧要求要使用到 DRAM 以及 SRAM 等等元件，因此Lab05介紹有關 Memory 的使用就變得很重要。期末專題如果有修過計算機組織(架構)的課程應該會很有幫助，可以更加熟悉處理器架構。



## 評分方式
在學期初就有公布課程配分如下:

- Weekly Lab Exercise x12 (60%)
- Midterm Project (10%)
- Midterm Exam (6%)
- Online Test (8%)
- Final Project (10%)
- Final Exam (6%)
- Bonus (Formal Verification) (3%)

雖然理論上助教期末會進行調分，不過調分的比例不是很固定，像要追求高分或是想抵免研究所學分的同學，最好盡量避免 2de 的情況。也可以參考下面的幾點建議，有效的提高分數。

## 給未來修課同學的建議

#### 1. 優質的 Pattern

在這堂課中提到兩種驗證電路的方式: PATTERN 和 Formal Verification。後只會以Bonus Lab的形式出現讓同學們練習。大多數形況下都是依靠 00_TESTBED 裡面的PATTERN 來測試自己的 RTL 是否正確。因此擁有一個高 coverage 的 PATTERN 非常非常的重要。大部分的同學取的PATTERN的方式就是直接把市面上流通的拿來用。我會說這樣的方式或許是最聰明的。因為轉寫 TESTBED 所需花費的精力通常大於等於設計RTL所花費的精力。另外也可以省下寶貴的時間多優化自己的RTL，衝高自己的排名。

雖然在業界確實分為DE 以及 DV ，而且DE通常待遇比較好。但我們永遠無法預期將來產業的趨勢，特別是在電路愈發複雜的今天，電路驗證早已成為電路設計的瓶頸。在學生時期就選擇抄近路對於實力的累積有負面的影響，也有可能限制未來發展的可能性。長遠來說，自己撰寫測試程式雖然對短期的成績比較不利，但是長遠來看，了解如何撰寫

驗證自己設計的RTL沒有功能上的錯誤就得要靠PATTERN 來測試。除了


#### 2. 像要輕鬆一點請報團，想學到東西盡量自己完成
如果要比較資工和電機有什麼鮮明的個性特點，那大概組團就是屬於電機系的標籤。有別於資工系同學多數都採取單打獨鬥的英雄主義，電機系的同學早已習慣狼群戰術，而這一堂課組團也能為妳拿到許多好處。除了能拿到基本上沒有成本的 PATTERN，可以和同學在作業初期就一同討論架構設計，獲得起跑優勢。還有如果有任何一個同學發現了一些神奇的做法，所有人都可以跟著受惠以及有問題可以一群人一起DEBUG等等，好處數不勝數。而我偏偏選擇 do it the hard way。



#### 3. 不要害怕問問題
每個 Exercise 和 Project 助教都會在 e3平台上開一個討論區供同學們問問題。一定要善用這個公開的平台，特別是當你沒有組隊打怪的時候。上面別人遇到的問題也是很好的參考，畢竟別人遇到的問題你也有好高機率會遇上。如果遇上問題時也可以善用這個平台發問，助教通常會在一天內回覆同學的提問。我也私訊過個別的修課同學請教問題，也接收過一些其他修課同學的私訊。我以親身經歷體會到不要害怕提問真的可以學到很多。

#### 4. 多參考網路資源，但避免抄襲

網路上其實不乏這一堂課的參考資料。在許多平台上都可以找到之前修課同學的原始碼。站在巨人肩膀上的同時，也別忘記參考別人的作法不等於直接 Ctrl + c/v 別人的作品，除了侵犯智慧財產權之外，也違反了自己在第一堂課上簽訂的 honour code。而抄襲也應該是助教要嚴格防範的事情。像是我修課這一屆就時常出現四五個人每次的作業面積、速度等參數都非常接近。一看就知道是有互相討論參考。我不是在說他們都互相抄答案，而是這樣不免讓人起疑。當然如果是組團一起打怪不免會互相參考，這也是ICLab助教需要拿捏的尺度問題。

#### 5. 參考 Best Code，了解自己的不足

每次助教都會請上次Exercise表現最好的Best Code 講解自己的作法並公開程式碼給大家參考。我覺得可以善加利用這個機會，了解厲害的同學採用的架構設計為什麼能拿到比較好的分數。是不是有哪些技巧可以延伸使用到其他場景? 如果能慢慢學習其他人的優點，將其融入自己的設計中，就會越來越進步。我身邊有一個反面例子，有一位同學就是因為每次都只求通過就好，導致她到最後的Final Project都還不太清楚 shift register 的用處。這樣就會很可惜，也少學到很多東西。

#### 6. Never Give up

想想之前所花費的時光和努力，中途退出不是太可惜了? 就算有一兩次成績不理想，也請堅持下去。在學期結束時一切都會值得的! 


## 結語

我在離校之前找到我的專題老師聊到這門課時

能夠修過交大有名的課程當然是很值得驕傲的事情，不過其實他也沒有望路上誇示的那樣: 修過就直接 XXX ... 。交大還有許多課程難度完全不輸給這堂課，帶給同學的思考空間或許還更多。我和一些修課同學聊天的時候發現很多人都只是因為薪水的緣故而選擇走數位電路設計: 我其實也沒有特別喜歡IC設計，就是出去薪水比較好就來修了。"Find a job you love and you'll never have to work a day in your life" 

上面那一段不代表我在黑這門課，相反的，我認為他絕對擔當的起交大王牌課程的美譽。教學內容非常紮實且重要，能夠讓修課同學在一個學期內有如此大的進步真的很不可思議。推薦這門課給想要挑戰自己，並且下定決心的同學。

